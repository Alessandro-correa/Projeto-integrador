<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="../../assets/css/style.css">
	<title>Sistema Campos Moto Peças - Cadastro de Cliente</title>
</head>
<body>
	<section id="sidebar">
		<a href="../../views/dashboard/index.html" class="brand"><img src="../../assets/images/logo.png" alt="Campos Moto Peças"></a>
		<ul class="side-menu">
			<li><a href="../../views/dashboard/index.html"><i class='bx bxs-dashboard icon' ></i> Dashboard</a></li>
			<li class="divider" data-text="principal">Principal</li>
			<li><a href="../../views/os/os-consulta.html"><i class='bx bxs-notepad icon' ></i> Ordem de Serviço</a></li>
			<li><a href="../../views/orcamentos/orcamentos-consulta.html"><i class='bx bxs-calculator icon' ></i> Orçamentos</a></li>
			<li class="divider" data-text="gestão">Gestão</li>
			<li><a href="../../views/clientes/clientes-consulta.html" class="active"><i class='bx bxs-user-detail icon' ></i> Clientes</a></li>
			<li><a href="../motos/motos-consulta.html"><i class='bx bxs-motorcycle icon' ></i> Motocicletas</a></li>
			<li><a href="../../views/marcas/marcas-consulta.html"><i class='bx bxs-tag-alt icon'></i> Marcas</a></li>
			<li><a href="../../views/fornecedores/fornecedores-consulta.html"><i class='bx bxs-truck icon'></i> Fornecedores</a></li>
			<li><a href="../../views/pecas/pecas-consulta.html"><i class='bx bxs-wrench icon'></i> Peças</a></li>
			<li><a href="../../views/usuarios/usuarios-consulta.html"><i class='bx bxs-shield-alt-2 icon'></i> Usuários</a></li>
		</ul>
	</section>
	<section id="content">
		<nav>
			<i class='bx bx-menu toggle-sidebar' ></i>
			<div class="theme-toggle">
				<input type="checkbox" id="theme-toggle-checkbox">
				<label for="theme-toggle-checkbox" class="theme-toggle-label">
					<i class='bx bxs-sun'></i>
					<i class='bx bxs-moon'></i>
				</label>
			</div>
			<a href="#" class="nav-link" style="margin-left: auto;">
				<i class='bx bxs-bell icon' ></i>
			</a>
			<span class="divider"></span>
			<div class="profile">
				<a href="#" class="nav-link">
					<i class='bx bxs-cog icon' title="Configurações"></i>
				</a>
				<a href="#" class="nav-link">
					<i class='bx bxs-log-out-circle icon' title="Sair"></i>
				</a>
			</div>
		</nav>
		<main>
			<h1 class="title">Clientes</h1>
			<ul class="breadcrumbs">
				<li><a href="../../index.html">Home</a></li>
				<li class="divider">/</li>
				<li><a href="clientes-consulta.html">Clientes</a></li>
				<li class="divider">/</li>
				<li><a href="#" class="active">Novo Cliente</a></li>
			</ul>
			<div class="data">
				<div class="content-data">
					<div class="head">
						<h3>Novo Cliente</h3>
					</div>
					<form action="#" class="os-form">
						<div class="form-row">
							<div class="form-group">
								<label for="nome">Nome Completo</label>
								<input type="text" id="nome" name="nome" required>
							</div>
							<div class="form-group">
								<label for="cpf">CPF</label>
								<input type="text" id="cpf" name="cpf" required>
							</div>
						</div>
						<div class="form-group">
							<label for="endereco">Endereço</label>
							<input type="text" id="endereco" name="endereco" required>
						</div>
						<div class="form-row">
							<div class="form-group">
								<label for="email">E-mail</label>
								<input type="email" id="email" name="email" required>
							</div>
							<div class="form-group">
								<label for="telefone">Telefone</label>
								<input type="text" id="telefone" name="telefone" required>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group">
								<label for="sexo">Sexo</label>
								<select id="sexo" name="sexo" required>
									<option value="">Selecione...</option>
									<option value="Masculino">Masculino</option>
									<option value="Feminino">Feminino</option>
								</select>
							</div>
							<div class="form-group">
								<label for="profissao">Profissão</label>
								<input type="text" id="profissao" name="profissao" required>
							</div>
						</div>
						<div class="form-group">
							<label for="dataDeNascimento">Data de Nascimento</label>
							<input type="date" id="dataDeNascimento" name="dataDeNascimento" required>
						</div>
						<div class="form-actions">
							<button type="submit" class="btn-primary">Cadastrar Cliente</button>
							<a href="clientes-consulta.html" class="btn-secondary">Cancelar</a>
						</div>
					</form>
				</div>
			</div>
		</main>
	</section>
	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
	<script type="module" src="../../assets/js/main.js"></script>
	<script>
document.getElementById('cpf').addEventListener('input', function(e) {
    let v = e.target.value.replace(/\D/g, '');
    if (v.length > 11) v = v.slice(0, 11);
    v = v.replace(/(\d{3})(\d)/, '$1.$2');
    v = v.replace(/(\d{3})(\d)/, '$1.$2');
    v = v.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    e.target.value = v;
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const telInput = document.getElementById('telefone');
    if (!telInput) return;

    // Adiciona elemento para mensagem
    const msg = document.createElement('div');
    msg.id = 'telefone-msg';
    msg.style.fontSize = '12px';
    msg.style.marginTop = '5px';
    msg.style.fontWeight = 'bold';
    telInput.parentNode.appendChild(msg);

    telInput.addEventListener('input', function(e) {
        let v = e.target.value.replace(/\D/g, '');
        if (v.length > 11) v = v.slice(0, 11);

        // Máscara: (99) 99999-9999 ou (99) 9999-9999
        if (v.length > 10) {
            v = v.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
        } else if (v.length > 6) {
            v = v.replace(/^(\d{2})(\d{4})(\d{0,4}).*/, '($1) $2-$3');
        } else if (v.length > 2) {
            v = v.replace(/^(\d{2})(\d{0,5})/, '($1) $2');
        }
        e.target.value = v;

        // Validação visual: só aceita celular (11 dígitos)
        const isValid = /^\(\d{2}\) 9\d{4}-\d{4}$/.test(v);
        if (v.length > 0) {
            if (isValid) {
                e.target.style.borderColor = 'green';
                msg.textContent = '✅ Número válido';
                msg.style.color = 'green';
            } else {
                e.target.style.borderColor = 'red';
                msg.textContent = '❌ Número inválido (apenas celular)';
                msg.style.color = 'red';
            }
        } else {
            e.target.style.borderColor = '';
            msg.textContent = '';
        }
    });

    // Impede envio do formulário se telefone for inválido
    const form = telInput.closest('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const v = telInput.value;
            const isValid = /^\(\d{2}\) 9\d{4}-\d{4}$/.test(v);
            if (!isValid) {
                telInput.focus();
                msg.textContent = '❌ Número inválido (apenas celular)';
                msg.style.color = 'red';
                telInput.style.borderColor = 'red';
                e.preventDefault();
            }
        });
    }

    // Restringe datas no campo de nascimento
    const dataInput = document.getElementById('dataDeNascimento');
    if (dataInput) {
        dataInput.setAttribute('min', '1920-01-01');
        const hoje = new Date();
        const anoMax = hoje.getFullYear() - 10;
        dataInput.setAttribute('max', anoMax + '-12-31');
    }
});
</script>
</body>
</html>