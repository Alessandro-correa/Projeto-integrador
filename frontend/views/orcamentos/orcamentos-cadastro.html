<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="../../assets/css/style.css">
	<link rel="stylesheet" href="../../assets/css/dashboard.css">
	<link rel="stylesheet" href="../../assets/css/template.css">
	<link rel="stylesheet" href="../../assets/css/forms.css">
	<link rel="stylesheet" href="../../assets/css/ajuste.css">
	<link rel="stylesheet" href="../../assets/css/orcamento-ajuste.css">
	<link rel="stylesheet" href="../../assets/css/botoes-override.css">
	<style>
		select {
			padding: 12px 16px;
			border-radius: 5px;
			border: 1px solid var(--grey);
			background: var(--grey);
			outline: none;
			width: 100%;
			font-size: 14px;
			transition: all .3s ease;
			background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e") !important;
			background-repeat: no-repeat !important;
			background-position: right 12px center !important;
			background-size: 16px !important;
			-webkit-appearance: none !important;
			-moz-appearance: none !important;
			appearance: none !important;
		}
		
		select:focus {
			border-color: var(--blue);
			box-shadow: 0 0 0 3px var(--light-blue);
		}
		
		/* Dark theme support */
		body.dark select {
			background: var(--dark-surface);
			border-color: var(--dark-border);
			color: var(--dark-text-primary);
			background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ccc' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e") !important;
			background-repeat: no-repeat !important;
			background-position: right 12px center !important;
			background-size: 16px !important;
		}
		
		body.dark select:focus {
			border-color: var(--blue);
			background: var(--dark-surface);
		}
		
		.btn-danger {
			background-color: #dc3545;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			font-size: 14px;
		}
		.btn-danger:hover {
			background-color: #c82333;
		}
		.total-section {
			background-color: #f8f9fa;
			padding: 15px;
			border-radius: 5px;
			border: 2px solid #28a745;
		}
		.total-section h3 {
			margin: 0;
			color: #28a745;
		}
		#itens-orcamento tbody tr:nth-child(even) {
			background-color: #f8f9fa;
		}
	</style>
	<title>Sistema Campos Moto Peças - Novo Orçamento</title>
</head>
<body>
	
	<section id="sidebar">
		<a href="../../views/dashboard/index.html" class="brand"><img src="../../assets/images/logo.png" alt="Campos Moto Peças"></a>
		<ul class="side-menu">
			<li><a href="../../views/dashboard/index.html"><i class='bx bxs-dashboard icon' ></i> Dashboard</a></li>
			<li class="divider" data-text="principal">Principal</li>
			<li><a href="../../views/os/os-consulta.html"><i class='bx bxs-notepad icon' ></i> Ordem de Serviço</a></li>
			<li><a href="../../views/orcamentos/orcamentos-consulta.html" class="active"><i class='bx bxs-calculator icon' ></i> Orçamentos</a></li>
			<li class="divider" data-text="gestão">Gestão</li>
			<li><a href="../../views/clientes/clientes-consulta.html"><i class='bx bxs-user-detail icon' ></i> Clientes</a></li>
			<li><a href="../motos/motos-consulta.html"><i class='bx bx-car icon'></i> Motocicletas</a></li>
			<li><a href="../../views/marcas/marcas-consulta.html"><i class='bx bxs-tag-alt icon'></i> Marcas</a></li>
			<li><a href="../../views/fornecedores/fornecedores-consulta.html"><i class='bx bxs-truck icon'></i> Fornecedores</a></li>
			<li><a href="../../views/pecas/pecas-consulta.html"><i class='bx bxs-wrench icon'></i> Peças</a></li>
			<li><a href="../../views/usuarios/usuarios-consulta.html"><i class='bx bxs-shield-alt-2 icon'></i> Usuários</a></li>
		</ul>
	</section>

	<section id="content">
		<nav>
			<i class='bx bx-menu toggle-sidebar' ></i>
			<div class="theme-toggle">
				<input type="checkbox" id="theme-toggle-checkbox">
				<label for="theme-toggle-checkbox" class="theme-toggle-label">
					<i class='bx bxs-sun'></i>
					<i class='bx bxs-moon'></i>
				</label>
			</div>
			<a href="#" class="nav-link" style="margin-left: auto;">
				<i class='bx bxs-bell icon' ></i>
			</a>
			<span class="divider"></span>
			<div class="profile">
				<a href="#" class="nav-link">
					<i class='bx bxs-cog icon' title="Configurações"></i>
				</a>
				<a href="#" class="nav-link">
					<i class='bx bxs-log-out-circle icon' title="Sair"></i>
				</a>
			</div>
		</nav>

		<main>
			<h1 class="title">Orçamentos</h1>
			<ul class="breadcrumbs">
				<li><a href="../../index.html">Home</a></li>
				<li class="divider">/</li>
				<li><a href="orcamentos-consulta.html">Orçamentos</a></li>
				<li class="divider">/</li>
				<li><a href="#" class="active">Novo Orçamento</a></li>
			</ul>
			
			<div class="data">
				<div class="content-data">
					<form id="cadastroForm" class="form-container">
						<div class="page-title">
							<h2><i class='bx bx-plus'></i> Formulário de Cadastro de Orçamento</h2>
						</div>
						<div class="form-section">
							<h3>Informações Básicas</h3>
							<div class="form-row">
								<div class="form-group">
									<label for="cliente_id">Cliente <span class="required">*</span></label>
									<select id="cliente_id" name="cliente_id" required>
										<option value="">Selecione o cliente...</option>
									</select>
								</div>
								<div class="form-group">
									<label for="motocicleta_id">Motocicleta <span class="required">*</span></label>
									<select id="motocicleta_id" name="motocicleta_id" required>
										<option value="">Selecione a motocicleta...</option>
									</select>
								</div>
							</div>
						</div>
						<div class="form-section">
							<h3>Valores e Validade</h3>
							<div class="form-row">
								<div class="form-group">
									<label for="valor">Valor do Orçamento <span class="required">*</span></label>
									<input type="number" id="valor" name="valor" step="0.01" min="0" required placeholder="0.00">
								</div>
								<div class="form-group">
									<label for="validade">Data de Validade <span class="required">*</span></label>
									<input type="date" id="validade" name="validade" required>
								</div>
							</div>
							<div class="form-group">
								<label for="status">Status <span class="required">*</span></label>
								<select id="status" name="status" required>
									<option value="P">Pendente</option>
									<option value="V">Validado</option>
									<option value="R">Rejeitado</option>
								</select>
							</div>
						</div>
						<div class="form-section">
							<h3>Peças e Serviços</h3>
							<div class="form-group">
								<label>Itens do Orçamento</label>
								<div class="pecas-header">
									<button type="button" id="addItemBtn" class="btn btn-outline btn-sm">
										<i class='bx bx-plus'></i> Adicionar Item
									</button>
								</div>
								<div id="itens-container" class="pecas-container">
									<!-- Itens serão carregados dinamicamente -->
								</div>
							</div>
						</div>
						<div class="form-actions">
							<button type="button" id="cancelBtn" class="btn btn-secondary">
								<i class='bx bx-x'></i> Cancelar
							</button>
							<button type="submit" id="saveBtn" class="btn btn-primary">
								<i class='bx bx-check'></i> Cadastrar Orçamento
							</button>
						</div>
					</form>
				</div>
			</div>
		</main>
	</section>

	<!-- Remover o modal de item do cadastro, pois a edição é inline -->

	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script type="module" src="../../assets/js/main.js"></script>
    <script src="../../src/components/OrcamentoCadastroController.js"></script>
    <script>
      // Função para aplicar cores corretas aos botões (igual ajuste)
      function aplicarCoresBotoes() {
        setInterval(() => {
          const saveButtons = document.querySelectorAll('.save-item-btn');
          const cancelButtons = document.querySelectorAll('.cancel-item-btn');
          saveButtons.forEach(btn => {
            btn.style.backgroundColor = '#FC3B56';
            btn.style.borderColor = '#FC3B56';
            btn.style.color = '#ffffff';
          });
          cancelButtons.forEach(btn => {
            btn.style.backgroundColor = '#9ca3af';
            btn.style.borderColor = '#9ca3af';
            btn.style.color = '#ffffff';
          });
        }, 100);
      }
      document.addEventListener('DOMContentLoaded', aplicarCoresBotoes);
      if (document.readyState !== 'loading') {
        aplicarCoresBotoes();
      }
    </script>
</body>
</html>
