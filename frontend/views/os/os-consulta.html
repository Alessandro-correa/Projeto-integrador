<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="../../assets/css/style.css">
	<link rel="stylesheet" href="../../assets/css/template.css">
	<link rel="stylesheet" href="../../assets/css/consulta.css">
	<link rel="stylesheet" href="../../assets/css/mobile-cards.css">
	<link rel="stylesheet" href="../../assets/css/os-ajuste.css">
	<style>
		.modal-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0,0,0,0.5);
			display: flex;
			align-items: center;
			justify-content: center;
			z-index: 1000;
		}
		.modal-content {
			background: white;
			padding: 20px;
			border-radius: 8px;
			max-width: 500px;
			width: 90%;
			max-height: 80vh;
			overflow-y: auto;
			box-shadow: 0 4px 20px rgba(0,0,0,0.1);
		}
		.modal-header {
			border-bottom: 1px solid #eee;
			margin-bottom: 20px;
			padding-bottom: 10px;
			position: relative;
		}
		.modal-header h3 {
			margin: 0;
			color: #333;
			padding-right: 30px;
		}
		.modal-close {
			position: absolute;
			top: 0;
			right: 0;
			border: none;
			background: none;
			font-size: 24px;
			cursor: pointer;
			color: #666;
			padding: 8px;
			min-width: 44px;
			min-height: 44px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.modal-close:hover {
			color: #333;
		}
		.modal-footer {
			border-top: 1px solid #eee;
			margin-top: 20px;
			padding-top: 15px;
			text-align: right;
		}

		/* Responsive table styles */
		@media screen and (max-width: 768px) {
			.orders {
				margin: 0 -15px;
			}

			.table-wrapper {
				overflow-x: auto;
				-webkit-overflow-scrolling: touch;
				margin: 0 15px;
				position: relative;
			}

			table {
				min-width: 600px;
			}

			.filter-container {
				flex-direction: column;
				gap: 15px;
				padding: 15px;
			}

			.filter-group {
				width: 100%;
				flex-direction: column;
				gap: 10px;
			}

			.filter-group input,
			.filter-group select,
			.filter-group button {
				width: 100%;
				min-height: 40px;
			}

			.head {
				flex-direction: column;
				gap: 15px;
				padding: 15px;
			}

			.head .btn-primary {
				width: 100%;
				justify-content: center;
			}

			/* Card view for mobile */
			.mobile-card {
				display: none;
				background: var(--light);
				border-radius: 8px;
				padding: 15px;
				margin: 10px 15px;
				box-shadow: 0 2px 4px rgba(0,0,0,0.1);
			}

			.mobile-card-row {
				display: flex;
				justify-content: space-between;
				margin-bottom: 8px;
				align-items: center;
			}

			.mobile-card-label {
				font-weight: 600;
				color: var(--dark-grey);
				font-size: 0.9rem;
			}

			.mobile-card-value {
				color: var(--dark);
				font-size: 0.9rem;
			}

			.mobile-card-actions {
				display: flex;
				gap: 10px;
				margin-top: 15px;
				justify-content: flex-end;
			}

			.mobile-card-actions .action-icon {
				min-width: 44px;
				min-height: 44px;
				display: flex;
				align-items: center;
				justify-content: center;
			}
		}

		@media screen and (max-width: 576px) {
			.orders table {
				display: none;
			}

			.mobile-card {
				display: block;
			}

			.filter-container {
				padding: 10px;
			}

			.head {
				padding: 10px;
			}

			.mobile-card-actions {
				flex-wrap: wrap;
			}

			.mobile-card-actions .action-icon {
				flex: 1;
			}
		}

		/* Dark mode adjustments */
		body.dark .mobile-card {
			background: var(--dark-surface);
			border: 1px solid var(--dark-border);
		}

		body.dark .mobile-card-label {
			color: var(--dark-text-secondary);
		}

		body.dark .mobile-card-value {
			color: var(--dark-text-primary);
		}
	</style>
	<title>Sistema Campos Moto Peças - Consulta O.S.</title>
</head>
<body>
	<section id="sidebar">
		<a href="../../index.html" class="brand"><img src="../../assets/images/logo.png" alt="Campos Moto Peças"></a>
		<ul class="side-menu">
			<li><a href="../dashboard/index.html"><i class='bx bxs-dashboard icon' ></i> Dashboard</a></li>
			<li class="divider" data-text="principal">Principal</li>
			<li><a href="os-consulta.html" class="active"><i class='bx bxs-notepad icon' ></i> Ordem de Serviço</a></li>
			<li><a href="../orcamentos/orcamentos-consulta.html"><i class='bx bxs-calculator icon' ></i> Orçamentos</a></li>
			<li class="divider" data-text="gestão">Gestão</li>
			<li><a href="../clientes/clientes-consulta.html"><i class='bx bxs-user-detail icon' ></i> Clientes</a></li>
			<li><a href="../motos/motos-consulta.html"><i class='bx bx-car icon'></i> Motocicletas</a></li>
			<li><a href="../marcas/marcas-consulta.html"><i class='bx bxs-tag-alt icon'></i> Marcas</a></li>
			<li><a href="../fornecedores/fornecedores-consulta.html"><i class='bx bxs-truck icon'></i> Fornecedores</a></li>
			<li><a href="../pecas/pecas-consulta.html"><i class='bx bxs-wrench icon'></i> Peças</a></li>
			<li><a href="../usuarios/usuarios-consulta.html"><i class='bx bxs-shield-alt-2 icon'></i> Usuários</a></li>
		</ul>
	</section>
	<section id="content">
		<nav>
			<i class='bx bx-menu toggle-sidebar' ></i>
			<div class="theme-toggle">
				<input type="checkbox" id="theme-toggle-checkbox">
				<label for="theme-toggle-checkbox" class="theme-toggle-label">
					<i class='bx bxs-sun'></i>
					<i class='bx bxs-moon'></i>
				</label>
			</div>
			<a href="#" class="nav-link" style="margin-left: auto;">
				<i class='bx bxs-bell icon' ></i>
			</a>
			<span class="divider"></span>
			<div class="profile">
				<a href="#" class="nav-link">
					<i class='bx bxs-cog icon' title="Configurações"></i>
				</a>
				<a href="#" class="nav-link">
					<i class='bx bxs-log-out-circle icon' title="Sair"></i>
				</a>
			</div>
		</nav>
		<main>
			<h1 class="title">Ordens de Serviço</h1>
			<ul class="breadcrumbs">
				<li><a href="../../index.html">Home</a></li>
				<li class="divider">/</li>
				<li><a href="#" class="active">Consulta de O.S.</a></li>
			</ul>
			<div class="filter-container">
				<div class="filter-group">
					<input type="text" id="filter-text" placeholder="Buscar por Código, Título, Cliente, CPF, Placa...">
				</div>
				<div class="filter-group">
					<select id="filter-status">
						<option value="">Todos os Status</option>
						<option value="Em Andamento">Em Andamento</option>
						<option value="Ajuste Pendente">Ajuste Pendente</option>
						<option value="Validação Pendente">Validação Pendente</option>
						<option value="Validada">Validada</option>
						<option value="Rejeitada">Rejeitada</option>
					</select>
					<input type="date" id="filter-data" title="Filtrar por data">
					<button id="clear-filters" class="btn-secondary">Limpar Filtros</button>
				</div>
			</div>
			<div class="data">
				<div class="content-data">
					<div class="head">
						<h3>Lista de Ordens de Serviço</h3>
						<a href="os-cadastro.html" class="btn-primary">Nova O.S.</a>
					</div>
					<div class="orders">
						<div class="table-wrapper">
							<table id="ordens-table">
								<thead>
									<tr>
										<th class="sortable" data-column="cod">
											Código
											<i class='bx bx-sort-alt-2 sort-icon'></i>
										</th>
										<th class="sortable" data-column="titulo">
											Título
											<i class='bx bx-sort-alt-2 sort-icon'></i>
										</th>
										<th class="sortable" data-column="cliente_nome">
											Cliente
											<i class='bx bx-sort-alt-2 sort-icon'></i>
										</th>
										<th class="sortable" data-column="motocicleta_placa">
											Placa
											<i class='bx bx-sort-alt-2 sort-icon'></i>
										</th>
										<th class="sortable" data-column="data" data-default-sort="desc">
											Data
											<i class='bx bx-sort-down sort-icon active'></i>
										</th>
										<th class="sortable" data-column="status">
											Status
											<i class='bx bx-sort-alt-2 sort-icon'></i>
										</th>
										<th>Ações</th>
									</tr>
								</thead>
								<tbody>
									<!-- Dados carregados dinamicamente -->
								</tbody>
							</table>
						</div>
						<!-- Template for mobile cards -->
						<div id="mobile-cards">
							<!-- Cards will be dynamically generated here -->
						</div>
					</div>
				</div>
			</div>
		</main>
	</section>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="../../src/services/ApiService.js"></script>
    <script src="../../src/components/BasePageController.js"></script>
    <script src="../../src/components/SidebarController.js"></script>
    <script src="../../src/components/ThemeController.js"></script>
    <script src="../../src/components/OrdemController.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize SidebarController
            if (!window.sidebarController) {
                window.sidebarController = new SidebarController();
                console.log('[SidebarController] Instanciado manualmente em os-consulta.html');
            }
            
            // Initialize OrdemController
            if (!window.ordemController) {
                window.ordemController = new OrdemController();
            }
        });
    </script>
</body>
</html>
